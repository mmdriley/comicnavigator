<!doctype html>
<html>
<head>
<script>
(function() {

var links = [
  'https://xkcd.com/2136/',
  'https://xkcd.com/2137/',
  'https://xkcd.com/2138/',
];

function maybeGoToNextLink() {
  var nextIndex = parseInt(window.localStorage.getItem('next-index') || '0');
  if (nextIndex >= links.length) {
    // Done
    window.localStorage.clear();
    return;
  }

  window.localStorage.setItem('next-index', (nextIndex + 1).toString());
  window.location.href = links[nextIndex];
}

// We need to listen for unload so we aren't cached in the bfcache
// and always get "load" events.
window.addEventListener("unload", function() {});

window.addEventListener("load", function(e) {
  // Without setTimeout, changing window.location in onload always has the effect of replacing the current history entry.
  window.setTimeout(maybeGoToNextLink, 0);
});

})();
</script>
</head>
<body>

</body>
</html>
