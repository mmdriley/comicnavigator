<!doctype html>
<html>
<head>
<title>comicnavigator</title>
<script>
var links = [
  'https://xkcd.com/2136/',
  'https://xkcd.com/2137/',
  'https://xkcd.com/2138/',
];

// window.addEventListener('unload', function() {});

window.addEventListener('load', function() {
  console.log(window.location.href);

  if (window.location.hash === '') {
    return;
  }

  let lastIndex = parseInt(window.location.hash.substr(1));
  let nextIndex = lastIndex + 1;

  if (nextIndex < links.length) {
    window.setTimeout(function() {
    window.location.hash = nextIndex.toString();
    window.setTimeout(function() {
    window.location.href = links[nextIndex];
    }, 0);
    }, 0);
  } else {
    window.location.hash = '';
  }
});

function start() {
  window.setTimeout(function() {
  window.location.hash = '0';
  window.setTimeout(function() {
  window.location.href = links[0];
  }, 0);
  }, 0);
}
</script>
</head>
<body>
<a href="#" onclick="start();">xkcd</a>
</body>
</html>
